<div id="rate_<%= post.id %>_<%= post.class.name %>">
<%
check = PostBook.find_rated_by(current_user).include?(post.post_book) if logged_in?
check ||= false %>
<div class="qashdU">
  <%= show_rating(post.id, post.post_book.total_good, controller_name, check, 1) %>
</div>
<div class="qashdD">
  <%= show_rating(post.id, post.post_book.total_bad, controller_name, check, 0) %>
</div>
</div>

<!-- BEGIN show LIKE comment area -->
<%= render :partial => "rate_cmts/like_cmts", :locals => {:post => post} %>
<!-- END show DISLIKE comment area -->
<!-- BEGIN show LIKE comment area -->
<%= render :partial => "rate_cmts/dislike_cmts", :locals => {:post => post} %>
<!-- END show DISLIKE comment area -->

		
<script type="text/javascript">
var waitIcon<%= post.id %> = '';
function LoadLikeCmt<%= post.id %>(perpage,page_no){
  $.ajax({
    url: '<%= load_bk_like_rate_cmts_url %>',
    type: 'GET',
    dataType: 'script',
    data: {
      post_id: <%= post.id %>,
      str_perpage: perpage,
      str_page_no: page_no
    },
    success: function(data){
      $('#wait_like<%= post.id %>').hide();
    }
  });//end ajax
}

  $(document).ready(function(){
    //BEGIN like handler
    if  ( ! ( $.browser.msie && $.browser.version == "8.0" ) ) {
      $('#like_area<%= post.id %>').corner();
    }
    $('div#rate_<%= post.id %>_Post').find('.qashdU').click(function(){
      $('#like_area<%= post.id %>').toggle('slow', function(){
        if ( $(this).is(":visible") == true ){
          LoadLikeCmt<%= post.id %>('5','1');
        } else {
          $('#wait_like<%= post.id %>').show();
          $('#like_inner<%= post.id %>').html('');
        }//end if
      });//end toggle
    });//end qashdU
    //END like handler
    //BEGIN dislike handler
    $('#dislike_area<%= post.id %>').corner();
    $('div#rate_<%= post.id %>_Post').find('.qashdD').click(function(){
      $('#dislike_area<%= post.id %>').toggle('slow', function(){
        if ( $(this).is(":visible") == true ){
          console.log('load LoadDisLikeCmt');
        }
      });
    });
    //END dislike handler
  });
</script>		
