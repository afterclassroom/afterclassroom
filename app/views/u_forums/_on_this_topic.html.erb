<div class="contMainR">
<div class="col300 slStory">
<div class="col300in mostPho">
  <h1 class="col300Title">
    <label style="text-align: left;">Members of this topic</label>
    <% if current_user != @ufo.user %>
      <div id="unsubscribe" style="float: right; margin-top: -13px;">Unsubscribe</div>
    <% else %>
      <div id="remove_usr" style="float: right; margin-top: -13px;">Remove membership</div>
    <% end %>
  </h1>


  <div id="form_member_area">
    <%= render :partial => "form_member" %>
  </div>

</div>
</div>
</div>
<script type="text/javascript">

var curentPage = parseInt('<%= @cur_page %>');

function LoadMember(strpage){
  pagingAjax = $.ajax({
    url: '<%= page_member_user_u_forums_path %>',
    type: 'GET',
    dataType: 'script',
    data: {
      page: strpage,
      ufo_id: <%= @ufo.id %>
    },
    success: function(data){
    }
  });//end ajax
}


$(document).ready(function(){
  $("#remove_usr").hover(function(){
    $(this).css('cursor','pointer');
  }, function(){
    $(this).css('cursor','default');
  });
  $('#remove_btn').click(function(){
    $('form#form_member').submit();
  });


  //BEGIN ajax pagination
  var curentPage = parseInt('<%= @cur_page %>');
  $('#member_paging a').each(function(){
    $(this).attr('href','javascript:;');
    $(this).click(function(){
      if ($(this).text() == 'Next'){
        curentPage = curentPage + 1;
        LoadMember(curentPage);
      }else if ($(this).text() == 'Previous'){
        curentPage = curentPage - 1;
        LoadMember(curentPage);
      }
      else {
        var strp = $(this).text();
        LoadMember(strp);
      }
    });
  });//end .each
  //END ajax pagination



});
</script>
