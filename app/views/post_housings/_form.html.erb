<% fields_for @post_housing.post do |post| %>
  <%= display_flash_messages %>
  <div class="postReq">*(asterisk) is required.</div>
  <div class="postItemDep">
    <div class="postTit">Type</div>
    <div>
      <%= select_tag("post_housing[housing_category_ids][]", options_for_select(HousingCategory.find(:all).collect {|p| [ p.name, p.id ] }, @post_housing.housing_categories), { :include_blank => "Select Type", :multiple => true, :id => "housing_category", :style => "width:340px" }) %>
    </div>
  </div>
  <%= render :partial => "/shared/form_post/title", :locals => {:post => post} %>
  <%= render :partial => "/shared/form_post/description", :locals => {:post => post} %>
  <%= render :partial => "/shared/form_post/select_school" %>
  <%= render :partial => "/shared/form_post/email" %>
  <div class="postItem">
    <div class="postTit">Phone</div>
    <div class="postInp"><%= f.text_field :phone, :style => "width:208px" %></div>
  </div>
  <div class="postItem">
    <div class="postTit">Address</div>
    <div class="postInp"><%= f.text_field :address, :style => "width:208px" %></div>
  </div>
  <%= render :partial => "/shared/form_post/file", :locals => {:post => post} %>
  <%= render :partial => "/shared/form_post/select_tag" %>
<% end %>

<ul id="housing_category_menu" class="mcdropdown_menu">
  <% JobType.find(:all).each do |t| %>
    <li rel_housing_category="<%= t.id %>">
      <%= t.name %>
    </li>
  <% end %>
</ul>

<script type="text/javascript">
    // 'Select All' text changed
    $("#housing_category").multiSelect({ selectAllText: 'Select All' });
    $("#post_description").counter({
        count: 'up',
        goal: 900
    });
    $(function() {
        $("#post_housing_due_date").datepicker();
    });
    function submit(){
        var result = $("#form_post").validate();
        if (result) {
            $("#form_post").submit();
        }
    }
    var tags = <%= array_or_string_for_javascript(@tags) %>;
    $(function () {
        $('#tag').tagSuggest ( {
            tagContainer : 'div',
            tagWrap : 'div',
            tags: tags,
            separator: ', '
        });
    }) ;

</script>