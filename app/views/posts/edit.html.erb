<% content_for :search do -%>
  <%= render :partial => 'shared/search_posts', :locals => {:search_name => @search_name, :type_name => @type_name, :new_post_path => @new_post_path, :search_post_path => "/posts"} %>
<% end -%>

<% content_for :select_your_school do -%>
  <div id="target_select_school">
    <span>&nbsp;</span>
  </div>
<% end -%>

<% content_for :sidebar do -%>
  <div id="post_guide_r">
    <h3>About Posting</h3>
    <p>
      Upload would take any where from 1 to 5 minutes.
      It depends on your internet connections.
    </p>
  </div>
<% end -%>
<!--Content-->
<div id="posting-section"><!-- posting-section-->
  <h3 class="post_header">Posting to the world</h3>
  <% form_for(@post, :html => {:id => "form", :name => "form", :multipart => true }) do |f| %>
    <ul>
      <li><label>Title*</label>
        <div class="user_ri"><%= f.text_field :title, :class => "required", :style=>"width:450px" %>
      </div></li>
      <li><label>Description*</label>
        <div class="user_ri">
          <font color=#666666>(900 characters max.) <strong><span id="count_post_description" >900</span></strong> remaining</font>
      <%= f.text_area :description, :rows => 10, :cols => 70, :class => "required", :onkeypress => "return LimitThis('post_description')", :onkeyup => "return CountThis('post_description', 'count_post_description')", :onmouseover => "return CountThis('post_description', 'count_post_description')", :wrap => "physical", :maxLength => "900"%></div></li>
      <%= select_your_school_for_edit_post("post", "posts/select_school", @school, @department, {"target" => "bottomLeft", "tip" => "topLeft"}) %>
      <li><label>Email</label>
      <div class="user_ri"><%= f.text_field :email, :class => "validate-email" %></div></li>
      <li><label></label><%= radio_button "post", "use_this_email", true %> Use this email address.</li>
      <li><label></label><%= radio_button "post", "use_this_email", false %> Reply to (post category) - xxx@afterclassroom.com.</li>
      <li><label>Telephone</label>
      <div class="user_ri"><%= f.text_field :telephone %></div></li>

      <li><label>Add/Edit File:</label>
      <div class="user_ri"><%= f.file_field :attach %></div></li>
      <%= render :partial => "choose_options", :locals => {:f => f } %>
      <li>
        <div class="post_cbt">
          <!-- post  button -->
          <a href="javascript:submit()" title="Post" class="link_bt">
            <span class="ltred_l"></span>
            <span class="ltred_c btf">Update</span>
            <span class="ltred_r"></span>
          </a>
          <!-- end post button -->
        </div>
      </li>
      <li>
        <label><div class="user_ri">(* indicates required field)</div></label>
      </li>
    </ul>
    <div id="elements_store"></div>
  </div><!-- end posting-section-->
<% end %>
<!--Content-->
<script type="text/javascript">
  var valid = new Validation('form', {immediate : true, onSubmit:false});
  function submit(){
    var result = valid.validate();
    if (result) {
      Tips.hideAll();
      $$('.prototip').each(function(element){
        $('elements_store').insert(element, { position: content });
      });
      $('form').submit();
    }
  }
</script>

<script language = "Javascript">
  function LimitThis(object_id) {
    if ($(object_id).value.length == $(object_id).readAttribute("maxLength")*1) return false;
  }

  function CountThis(object_id, visCnt) {
    if ($(object_id).value.length>$(object_id).readAttribute("maxLength")*1) $(object_id).value = $(object_id).value.substring(0,$(object_id).readAttribute("maxLength")*1);
    if ($(visCnt)) $(visCnt).update($(object_id).readAttribute("maxLength")-$(object_id).value.length);
  }
</script>