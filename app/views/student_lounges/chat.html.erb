<% content_for :menu_top_student_lounge do -%>
<%= render :partial => '/shared/submenu' %>
<% end -%>
<div class="contMainC">
    <div class="col195 stuLLeft">
        <div class="col195in">
            <h1 class="col300Title">Friends wanted to chat with you</h1>
            <div id="div_friends_want_you_chat">
            </div>
        </div>
    </div>
    <div class="col195 stuLLeft">
        <div class="col195in">
            <h1 class="col300Title">Friends changed their message</h1>
            <div id="div_friends_changed_their_message">
            </div>
        </div>
    </div>
</div>
<div class="contMainL">
    <div class="col451 proCen" id="user_wall">
        <%= render :partial => "user_walls/wall_form" %>
        <div class="col451in">
            <div class="proCenCont">
            	<div id="wall_page_wrap">
            		<%= render :partial => "stu_lounge_item", :locals => {:walls => @walls} %>
            	</div>
                <div class="goTop">
                    <a href="javascript:;" onclick="goToByScroll('top_page')">Top</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="contMainR">
    <%= render :partial => "friends_in_chatting" %>
    <div class="col300 stuL300">
        <div class="col300in">
            <h1 class="col300Title">Friends you invited to chat chit</h1>
            <div class="col300Cont">
                <div id="div_friends_you_invited_to_chat">
                </div>
            </div>
        </div>
    </div>
  <div class="col300 stuL300">
        <div class="col300in">
            <h1 class="col300Title">Friends online</h1>
            <div class="col300Cont">
                <div id="div_friends_online">
                </div>
            </div>
        </div>
    </div>
    <!--Ads-->
    <%= render :partial => "ads/show_vertical_ads" %>
    <!--Ads-->
</div>
<script type="text/javascript" charset="utf-8">
      var jug = new Juggernaut;
      jug.subscribe("chat_<%= current_user.id %>", function(data){
	  		chanel_name = data.chanel_name
			message = data.message
			event = data.event
			
			switch(event)
			{
			case 'invite_chat':
			  	//Refressh
            	friends_you_invited_chat();
            	friends_want_you_chat();
            	//Push message
            	insert_text_to_chatcontent(chanel_name, message);
			  break;
			case 'add_users_to_chat':
			  //Refressh
            	friends_you_invited_chat();
            	friends_want_you_chat();
            	//Push message
            	insert_text_to_chatcontent(chanel_name, message);
			  break;
			  case 'send_data':
			  //Refressh
			    friends_changed_message();
            	friends_you_invited_chat();
            	friends_want_you_chat();
            	//Push message
            	insert_text_to_chatcontent(chanel_name, message);
			  break;
			  case 'stop_chat':
			  //Refressh
			    friends_changed_message();
            	friends_you_invited_chat();
            	friends_want_you_chat();
            	//Push message
            	insert_text_to_chatcontent(chanel_name, message);
			  break;
			}
      });
</script>
<script>
    <% if @user_invite_chat %>
        window.onload(invite_chat('<%= @user_invite_chat.id %>'));
    <% end %>
      friends_changed_message();
      friends_you_invited_chat();
      friends_want_you_chat();
      friends_online();
</script>
<script type="text/javascript">
	var path = "/user_walls/next_page_wall?user_id=<%= current_user.id %>";
	var total_wall = <%= @walls.total_entries %>;
    $(document).ready(function(){
        $("body").flexiPagination({
            url: path,
            currentPage: 1,
            totalResults: total_wall,
            perPage: 10,
            container: "#wall_page_wrap",
            pagerVar: "page",
            loaderImgPath: "/images/loader.gif",
            debug: 0
        });
    });
</script>