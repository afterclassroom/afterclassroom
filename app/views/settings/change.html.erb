<style type="text/css">
  .normal {
    width: 60px;
    height: 30px;
    background-color:White;
  }
  .smbutton {
    position:relative;
    top: 5px;
    right: -10px;
  }
</style>

<script language="javascript">
  $(document).ready(function(){
    var editType = $('#label_msg').html();
    //replace normal input with password-input tag
    if ( editType.indexOf("password", 0) > 0 ){
      $('#target').find('input:eq(0)').replaceWith("<input id='passwd' value='' type='password' name='passwd' size='15'/>");
    }
    //disable submit button, only enable if 2 passwords are the same
    var $submitButton = $('#target').find("input[type='submit']");
    $submitButton.attr("disabled", "true");
    
    //$submitButton = $('#target').find("input[type='submit']").bind("mouseover",validatePSW);

    $divButton = $('#SMDIV').bind("mouseover",validatePSW);

      
  });
  function validatePSW(evt){
    var strPSW1 = $('#passwd').val();
    var strPSW2 = $('#reTypedPasswd').val();
    if (strPSW1 != "" && strPSW2!= "" && strPSW1 == strPSW2){
      var $submitButton = $('#target').find("input[type='submit']");
      $submitButton.attr("disabled", "");
      $('#errorMessage').html('_');
    }
    else{
      $('#errorMessage').html('2 passwords are not right');
      var $submitButton = $('#target').find("input[type='submit']");
      $submitButton.attr("disabled", "true");
    }
    //$("#abc").toggleClass("highlighted");
  }



  $('#target').submit(function() {
    var editType = $('#label_msg').html();
    if ( editType.indexOf("email", 0) > 0 )
      editType = "email";
    else if ( editType.indexOf("name", 0) > 0 )
      editType = "name";
    else if ( editType.indexOf("password", 0) > 0 )
      editType = "psw";

    $('#target').find('input:eq(0)').append("<input type='text' value='"+editType+"' name='editType' />") ;

    return true;
  });

</script>
<div id="errorMessage">ERROR message to be displayed here</div>
<form id="target" action="<%=  savechange_settings_path %>">
  <div id="label_msg">
    <%= @label %>
  </div>
  <p>
    <input type="text" value="" name="changedValue" />
  </p>
  <% if @label.to_s == "Please enter new password" %>
    <p>
      Please re-enter the password
      <br/>
      <input type='password' id='reTypedPasswd' name='reTypedPasswd' size='15'/><br/>
    </p>
  <% end %>
  <div id="SMDIV" class="normal">
    <input class="smbutton" type="submit" value="Save"  />
  </div>
</form>