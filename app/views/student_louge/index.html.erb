<%= juggernaut :debug => true, :client_id => current_user.login %>
<%= render :partial => "friends_changed_message", :locals => {:friends_change => @friends_change} %>
<%= render :partial => "friends_want_you_chat", :locals => {:friends_want => @friends_want} %>
<%= render :partial => "friends_you_invited_chat", :locals => {:friends_invite => @friends_invite} %>
<%= render :partial => "friends_in_chatting", :locals => {:friends_in_chat => @friends_in_chat} %>

<script>
	function invite_chat(login) {
		new Ajax.Request('/student_louge/invite_chat', 
		{asynchronous:true, 
		 evalScripts:true, 
		 method:'get',
		 onComplete:function(request){
			//
		 }, 
		 parameters: { user: login } 
		}); 
	}
	
	function send_data(id, chanel_name) {
		new Ajax.Request('/student_louge/send_data', 
		{asynchronous:true, 
		 evalScripts:true, 
		 method:'get',
		 onComplete:function(request){
			$('chat_input_'+id).value = '';
		 }, 
		 parameters: { user_id: id, chanel_name: chanel_name, chat_input: $('chat_input_'+id).value } 
		}); 
	}
	
	function stop_chat(id, chanel_name, window_name){
		new Ajax.Request('/student_louge/stop_chat', 
			{asynchronous:true, 
			 evalScripts:true, 
			 method:'get',
			 onComplete:function(request){
				kill_mydow(window_name);
			 }, 
			 parameters: { user_id: id , chanel_name: chanel_name} 
			});
	}
	
	function scroll_div(id){
		$(id).scrollTop = $(id).scrollHeight
	}
</script>
<% if @user_invite_chat %>			
<script>
  window.onload(invite_chat('<%= @user_invite_chat.login %>'));
</script>
<% end %>